# AMS-AI MindModel Manifest
# 晶圆厂设备告警管理系统 - AI辅助开发约束模型

metadata:
  project_name: ams-ai
  project_type: semiconductor_fab_alarm_management
  architecture: single_cluster_monolith
  version: 1.0.0
  created: 2026-03-01
  updated: 2026-03-01
  
description: |
  晶圆厂设备告警管理系统 (Wafer Fab Equipment Alarm Management System)
  - Java 25 + Quarkus 3.31.2 单体集群架构
  - 多租户设计，支持 PostgreSQL/Oracle
  - React 18 + TypeScript 5 前端
  - AI驱动的告警分析和处理

tech_stack:
  backend:
    language: Java 25
    framework: Quarkus 3.31.2
    orm: Hibernate Panache Next (Repository Pattern)
    cache: Hazelcast 5.4.0
    migration: Liquibase 4.27.0
    databases:
      - PostgreSQL 42.7.3
      - Oracle 23.3.0.23.09
    
  frontend:
    language: TypeScript 5.5.0
    framework: React 18.2.0
    build: Vite 5.2.0
    ui_library: Ant Design 6.0.0
    state: Zustand 4.5.2
    routing: React Router 6.23.1
    
  testing:
    backend: JUnit 5.10.2, Testcontainers 2.0.3, AssertJ 3.25.3
    frontend: Playwright 1.58.2
    
  build:
    backend: Gradle 8.x
    frontend: pnpm 9.0.0

architecture:
  pattern: layered_monolith
  modules:
    - lib-common          # 工具类、异常、DTO、安全
    - lib-persistence     # Hibernate实体 (Repository模式)
    - lib-cluster         # Hazelcast缓存
    - feature-core        # 告警流水线
    - feature-admin       # 管理后台
    - feature-alert-ingestion  # Webhook/API接入
    - feature-ai-analysis # LLM集成
    - feature-notification # 通知渠道
    - feature-multi-tenant   # 多租户扩展
    - feature-graphql     # GraphQL API
    - app-web             # React前端
    - app-boot            # Quarkus主程序

key_principles:
  - single_cluster_monolith  # 禁止微服务拆分
  - repository_pattern       # 必须通过 Repository 访问数据
  - multi_tenant_isolation   # 必须过滤租户数据
  - database_migration       # 必须使用 Liquibase
  - no_lombok               # 禁止使用 Lombok (与 Panache 不兼容)

constraint_files:
  - tech-stack.md           # 技术栈约束
  - coding-conventions.md   # 编码约定
  - entity-pattern.md       # 实体模式
  - repository-pattern.md   # Repository模式
  - service-pattern.md      # Service模式
  - security-pattern.md     # 安全模式
  - multi-tenant-pattern.md # 多租户模式
  - testing-pattern.md      # 测试模式
  - frontend-patterns.md    # 前端模式
  - anti-patterns.md        # 反模式（必须避免）
  - api-patterns.md         # API设计模式
  - graphql-patterns.md     # GraphQL模式
  - caching-patterns.md     # 缓存模式
  - error-handling.md       # 错误处理模式

domain_concepts:
  core_entities:
    - Alarm          # 告警（核心实体）
    - Equipment      # 设备
    - Tenant         # 租户
    - User           # 用户
    - Role           # 角色
    - Permission     # 权限
    - Menu           # 菜单
    - Notification   # 通知
    
  business_flows:
    - alarm_ingestion      # 告警接入
    - alarm_pipeline       # 告警流水线
    - alarm_analysis       # AI告警分析
    - notification_delivery # 通知投递
    - user_authentication  # 用户认证
    - rbac_authorization   # RBAC授权
