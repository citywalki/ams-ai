# AMS-AI

**æ™¶åœ†å‚è®¾å¤‡å‘Šè­¦ç®¡ç†ç³»ç»Ÿ** - åŸºäºäº‘åŸç”Ÿæ¶æ„çš„ä¼ä¸šçº§å‘Šè­¦è§£å†³æ–¹æ¡ˆï¼Œä¸“ä¸ºåŠå¯¼ä½“åˆ¶é€ è¡Œä¸šè®¾è®¡ã€‚

## ğŸ“‹ ç›®å½•

- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [å¼€å‘è§„èŒƒ](#å¼€å‘è§„èŒƒ)
- [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
- [è·¯çº¿å›¾](#è·¯çº¿å›¾)

---

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| è¿è¡Œæ—¶æ¡†æ¶ | Quarkus | 3.31.2 |
| è¯­è¨€ | Java | 21 |
| æŒä¹…å±‚ | Hibernate ORM + Panache Next | - |
| æ•°æ®åº“ | PostgreSQL / Oracle | 15+ / 19c+ |
| æ•°æ®è¿ç§» | Liquibase | 4.27.0 |
| åˆ†å¸ƒå¼ç¼“å­˜ | Hazelcast | 5.4.0 |
| å®‰å…¨è®¤è¯ | SmallRye JWT | - |
| API å±‚ | REST + GraphQL (SmallRye) | - |
| AI é›†æˆ | LangChain4j + Ollama | 0.29.1 |
| ç›‘æ§ | Micrometer + Prometheus | 1.12.5 |

### å‰ç«¯æŠ€æœ¯

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| æ¡†æ¶ | React | 18.2 |
| è¯­è¨€ | TypeScript | 5.2 |
| æ„å»ºå·¥å…· | Vite | 5.0 |
| UI ç»„ä»¶ | Radix UI + Tailwind CSS | 4.x |
| çŠ¶æ€ç®¡ç† | Zustand + TanStack Query | 4.4 / 5.90 |
| GraphQL å®¢æˆ·ç«¯ | graphql-request + json-bigint | 7.4 |
| å›½é™…åŒ– | i18next | 25.x |
| E2E æµ‹è¯• | Playwright | 1.58 |

---

## é¡¹ç›®ç»“æ„

```
ams-ai/
â”œâ”€â”€ app-boot/                     # Quarkus ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ src/main/resources/
â”‚       â””â”€â”€ application.yml       # ä¸»é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ app-web/                      # React å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ features/             # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ pages/                # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/               # Zustand çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ services/             # API æœåŠ¡
â”‚   â”‚   â””â”€â”€ i18n/                 # å›½é™…åŒ–èµ„æº
â”‚   â””â”€â”€ e2e/                      # Playwright æµ‹è¯•
â”‚
â”œâ”€â”€ lib-common/                   # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ exception/                # å¼‚å¸¸å®šä¹‰
â”‚   â”œâ”€â”€ dto/                      # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â””â”€â”€ constants/                # å¸¸é‡å®šä¹‰
â”‚
â”œâ”€â”€ lib-persistence/               # æŒä¹…å±‚
â”‚   â””â”€â”€ entity/                   # Hibernate å®ä½“
â”‚
â”œâ”€â”€ lib-cluster/                   # é›†ç¾¤æ¨¡å—
â”‚   â””â”€â”€ Hazelcast é…ç½®
â”‚
â”œâ”€â”€ lib-security/                  # å®‰å…¨æ¨¡å—
â”‚   â”œâ”€â”€ JWT è®¤è¯
â”‚   â”œâ”€â”€ ç§Ÿæˆ·ä¸Šä¸‹æ–‡
â”‚   â””â”€â”€ RBAC æƒé™
â”‚
â”œâ”€â”€ feature-core/                  # å‘Šè­¦æµæ°´çº¿æ ¸å¿ƒ
â”‚   â”œâ”€â”€ å‘Šè­¦å¤„ç†å¼•æ“
â”‚   â”œâ”€â”€ è§„åˆ™è¯„ä¼°
â”‚   â””â”€â”€ çŠ¶æ€ç®¡ç†
â”‚
â”œâ”€â”€ feature-admin/                 # ç®¡ç†åå°
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ è§’è‰²ç®¡ç†
â”‚   â”œâ”€â”€ æƒé™ç®¡ç†
â”‚   â””â”€â”€ èœå•ç®¡ç†
â”‚
â”œâ”€â”€ feature-graphql/               # GraphQL API
â”‚   â”œâ”€â”€ entity/                    # å®ä½“æŸ¥è¯¢ API
â”‚   â”‚   â”œâ”€â”€ user/                  # ç”¨æˆ·æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ role/                  # è§’è‰²æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ menu/                  # èœå•æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ permission/            # æƒé™æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ alarm/                 # å‘Šè­¦æŸ¥è¯¢
â”‚   â”‚   â””â”€â”€ dict/                  # å­—å…¸æŸ¥è¯¢
â”‚   â”œâ”€â”€ connection/                # åˆ†é¡µè¿æ¥ç±»å‹
â”‚   â””â”€â”€ filter/                    # è¿‡æ»¤æ¡ä»¶è½¬æ¢
â”‚
â”œâ”€â”€ feature-alert-ingestion/       # å‘Šè­¦æ¥å…¥
â”‚   â”œâ”€â”€ Webhook æ¥æ”¶
â”‚   â”œâ”€â”€ API æ¥å…¥
â”‚   â””â”€â”€ æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
â”‚
â”œâ”€â”€ feature-ai-analysis/           # AI æ™ºèƒ½åˆ†æ
â”‚   â””â”€â”€ LangChain4j é›†æˆ
â”‚
â”œâ”€â”€ feature-notification/          # é€šçŸ¥æ¸ é“
â”‚   â”œâ”€â”€ é‚®ä»¶
â”‚   â”œâ”€â”€ çŸ­ä¿¡
â”‚   â””â”€â”€ IM (é’‰é’‰/ä¼ä¸šå¾®ä¿¡)
â”‚
â””â”€â”€ feature-multi-tenant/          # å¤šç§Ÿæˆ·æ‰©å±•
    â””â”€â”€ ç§Ÿæˆ·éš”ç¦»
```

---

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½ (P0)

#### å‘Šè­¦æ¥å…¥
- **å¤šåè®®æ”¯æŒ**: HTTP Webhookã€gRPCã€TCP Socket
- **æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ**: Kafka/RabbitMQ/ActiveMQ
- **åŠå¯¼ä½“è¡Œä¸šç‰¹æœ‰**: EAP é›†æˆã€è®¾å¤‡çŠ¶æ€ç›‘æ§ (E10/E40/E90)
- **å®æ—¶æ€§èƒ½**: æ¶ˆæ¯å¤„ç†å»¶è¿Ÿ < 100msï¼Œæ”¯æŒ 1000+ TPS

#### å‘Šè­¦å¤„ç†å¼•æ“
- **å‘Šè­¦æŒä¹…åŒ–**: PostgreSQL/Oracle å­˜å‚¨
- **æ™ºèƒ½å»é‡**: åŸºäºæŒ‡çº¹çš„å‘Šè­¦å»é‡
- **ä¼˜å…ˆçº§è®¡ç®—**: è§„åˆ™å¼•æ“ + AI åˆ†æ
- **çŠ¶æ€æµè½¬**: æ–°å»º â†’ ç¡®è®¤ â†’ å¤„ç†ä¸­ â†’ å·²è§£å†³ â†’ å·²å…³é—­

#### æ™ºèƒ½åˆ†æ
- **AI åˆ†ç±»**: åŸºäºå†…å®¹çš„è‡ªåŠ¨åˆ†ç±»
- **æ ¹å› åˆ†æ**: è¯†åˆ«å‘Šè­¦æ ¹æœ¬åŸå› 
- **è¶‹åŠ¿é¢„æµ‹**: é¢„æµ‹å‘Šè­¦è¶‹åŠ¿
- **èºæ—‹å‘Šè­¦æ£€æµ‹**: åŒä¸€é—®é¢˜åå¤è§¦å‘æ£€æµ‹

#### é€šçŸ¥åˆ†å‘
- **å¤šæ¸ é“**: é‚®ä»¶ã€çŸ­ä¿¡ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€Slack
- **é€šçŸ¥ç­–ç•¥**: åŸºäºçº§åˆ«å’Œæ—¶é—´çš„å‘é€ç­–ç•¥
- **å‘Šè­¦å‡çº§**: é•¿æ—¶é—´æœªå¤„ç†è‡ªåŠ¨å‡çº§
- **æ¨¡æ¿ç®¡ç†**: å¯é…ç½®çš„é€šçŸ¥å†…å®¹æ¨¡æ¿

#### ç­–ç•¥ç®¡ç†
- **è§„åˆ™å¼•æ“**: åŸºäºæ¡ä»¶çš„å‘Šè­¦è§¦å‘è§„åˆ™
- **é™é»˜è§„åˆ™**: ç‰¹å®šæ—¶é—´/æ¡ä»¶ä¸‹çš„å‘Šè­¦é™é»˜
- **èšåˆè§„åˆ™**: å‡å°‘å‘Šè­¦é£æš´
- **è·¯ç”±è§„åˆ™**: å‘Šè­¦è‡ªåŠ¨è·¯ç”±åˆ°å¤„ç†äºº

#### å¤šç§Ÿæˆ·æ¶æ„
- **æ•°æ®éš”ç¦»**: æŒ‰ä¸šåŠ¡çº¿éš”ç¦»å‘Šè­¦ã€é…ç½®ã€ç”¨æˆ·æ•°æ®
- **é…ç½®éš”ç¦»**: æ¯ä¸ªä¸šåŠ¡çº¿ç‹¬ç«‹é…ç½®å‘Šè­¦ç­–ç•¥
- **æƒé™éš”ç¦»**: ç”¨æˆ·åªèƒ½è®¿é—®æ‰€å±ä¸šåŠ¡çº¿æ•°æ®
- **ç­–ç•¥æ’ä»¶åŒ–**: SPI æœºåˆ¶æ”¯æŒä¸šåŠ¡çº¿å®šåˆ¶ç­–ç•¥

### ç®¡ç†åå°

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| å‘Šè­¦å¤§ç›˜ | å®æ—¶åˆ—è¡¨ã€ç»Ÿè®¡å¡ç‰‡ã€è¶‹åŠ¿å›¾è¡¨ã€åˆ†å¸ƒåˆ†æ |
| å‘Šè­¦ç®¡ç† | æœç´¢ç­›é€‰ã€è¯¦æƒ…æŸ¥çœ‹ã€å¤„ç†æ“ä½œã€è¯„è®ºå…³è” |
| ç”¨æˆ·ç®¡ç† | CRUDã€è§’è‰²åˆ†é…ã€å¤šä¸šåŠ¡çº¿æ”¯æŒ |
| è§’è‰²ç®¡ç† | CRUDã€æƒé™ç»‘å®šã€ç§Ÿæˆ·éš”ç¦» |
| èœå•ç®¡ç† | æ ‘å½¢ç»“æ„ã€æƒé™æ§åˆ¶ã€æŒ‰é’®çº§æƒé™ |
| æ•°æ®å­—å…¸ | åˆ†ç±»ç®¡ç†ã€æ ‘å½¢å­—å…¸é¡¹ |
| ä¸šåŠ¡çº¿ç®¡ç† | ç§Ÿæˆ·åˆ›å»ºã€èµ„æºé…é¢ã€ç­–ç•¥æ’ä»¶ |

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
# åç«¯
JDK 21+
PostgreSQL 15+ æˆ– Oracle 19c+

# å‰ç«¯
Node.js 18+
pnpm 9+
```

### åç«¯å¯åŠ¨

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ams-ai

# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½)
./gradlew quarkusDev

# å®Œæ•´æ„å»º
./gradlew build

# è·³è¿‡æµ‹è¯•æ„å»º
./gradlew build -x test

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./gradlew test

# è¿è¡Œå•ä¸ªæµ‹è¯•
./gradlew :app-boot:test --tests "pro.walkin.ams.boot.ApplicationTest"

# æ•°æ®åº“è¿ç§»
./gradlew liquibaseUpdate
```

### å‰ç«¯å¯åŠ¨

```bash
cd app-web

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# ç”Ÿäº§æ„å»º
pnpm build

# ä»£ç æ£€æŸ¥
pnpm lint

# E2E æµ‹è¯•
pnpm test:e2e

# E2E æµ‹è¯• (UI æ¨¡å¼)
pnpm test:e2e:ui
```

### è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯åº”ç”¨ | http://localhost:5173 |
| åç«¯ API | http://localhost:8080 |
| Swagger UI | http://localhost:8080/q/swagger-ui/ |
| GraphQL UI | http://localhost:8080/q/graphql-ui/ |
| GraphQL API | http://localhost:8080/graphql |

---

## API æ–‡æ¡£

### REST API

```bash
# å¥åº·æ£€æŸ¥
GET /q/health

# å½“å‰ç”¨æˆ·ä¿¡æ¯
GET /api/auth/me

# å½“å‰ç”¨æˆ·èœå•
GET /api/system/menus/user

# å½“å‰ç”¨æˆ·æƒé™
GET /api/system/permissions/user
```

### GraphQL æŸ¥è¯¢ç¤ºä¾‹

```graphql
# ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢
query Users {
  users(page: 0, size: 10) {
    content {
      id
      username
      email
      enabled
      roles {
        id
        name
      }
    }
    totalElements
    totalPages
  }
}

# è§’è‰²å¸¦æƒé™æŸ¥è¯¢
query RoleWithPermissions($id: BigInteger!) {
  roles(where: { id: { eq: $id } }) {
    content {
      id
      name
      code
      permissions {
        id
        name
        code
      }
    }
  }
}

# èœå•æ ‘æŸ¥è¯¢
query MenuTree {
  menus(where: { menuType: { eq: FOLDER } }) {
    content {
      id
      name
      code
      sortOrder
      children {
        id
        name
        path
      }
    }
  }
}
```

### API æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯åº”ç”¨                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  graphql-request  â”‚  Axios + React Query                â”‚
â”‚  (æŸ¥è¯¢)            â”‚  (å‘½ä»¤)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
         â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /graphql       â”‚    â”‚  /api/*                         â”‚
â”‚  GraphQL API    â”‚    â”‚  REST API                       â”‚
â”‚  â€¢ ç”¨æˆ·æŸ¥è¯¢      â”‚    â”‚  â€¢ åˆ›å»º/æ›´æ–°/åˆ é™¤               â”‚
â”‚  â€¢ è§’è‰²æŸ¥è¯¢      â”‚    â”‚  â€¢ å½“å‰ç”¨æˆ·ä¿¡æ¯                 â”‚
â”‚  â€¢ èœå•æŸ¥è¯¢      â”‚    â”‚  â€¢ è®¤è¯ç›¸å…³                     â”‚
â”‚  â€¢ æƒé™æŸ¥è¯¢      â”‚    â”‚                                 â”‚
â”‚  â€¢ å‘Šè­¦æŸ¥è¯¢      â”‚    â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¶æ„è®¾è®¡

### å•ä½“é›†ç¾¤æ¶æ„

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           è´Ÿè½½å‡è¡¡å™¨                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                       â”‚                       â”‚
            â–¼                       â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Quarkus å®ä¾‹  â”‚       â”‚  Quarkus å®ä¾‹  â”‚       â”‚  Quarkus å®ä¾‹  â”‚
    â”‚   (Node 1)    â”‚       â”‚   (Node 2)    â”‚       â”‚   (Node 3)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                       â”‚                       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Hazelcast é›†ç¾¤          â”‚
                    â”‚   (åˆ†å¸ƒå¼ç¼“å­˜ + ä¼šè¯å…±äº«)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      PostgreSQL / Oracle      â”‚
                    â”‚        (ä¸»ä»å¤åˆ¶)              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æ¨¡å‹

```sql
-- æ ¸å¿ƒè¡¨ç»“æ„
users                 -- ç”¨æˆ·è¡¨
â”œâ”€â”€ id (PK)
â”œâ”€â”€ tenant_id         -- ç§Ÿæˆ· ID
â”œâ”€â”€ username
â”œâ”€â”€ email
â”œâ”€â”€ password_hash
â””â”€â”€ enabled

roles                 -- è§’è‰²è¡¨
â”œâ”€â”€ id (PK)
â”œâ”€â”€ tenant_id
â”œâ”€â”€ name
â”œâ”€â”€ code
â””â”€â”€ description

permissions           -- æƒé™è¡¨
â”œâ”€â”€ id (PK)
â”œâ”€â”€ name
â”œâ”€â”€ code
â”œâ”€â”€ type              -- MENU/BUTTON/API
â””â”€â”€ menu_id (FK)

menus                 -- èœå•è¡¨
â”œâ”€â”€ id (PK)
â”œâ”€â”€ parent_id (FK)
â”œâ”€â”€ name
â”œâ”€â”€ code
â”œâ”€â”€ path
â”œâ”€â”€ menu_type         -- FOLDER/MENU/BUTTON
â””â”€â”€ sort_order

alarms                -- å‘Šè­¦è¡¨
â”œâ”€â”€ id (PK)
â”œâ”€â”€ tenant_id
â”œâ”€â”€ title
â”œâ”€â”€ severity
â”œâ”€â”€ status
â”œâ”€â”€ source_id
â”œâ”€â”€ fingerprint       -- å»é‡æŒ‡çº¹
â””â”€â”€ metadata (JSON)
```

### å®‰å…¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      JWT è®¤è¯æµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  1. ç”¨æˆ·ç™»å½• â†’ éªŒè¯å‡­è¯ â†’ ç”Ÿæˆ JWT Token                 â”‚
â”‚  2. è¯·æ±‚æºå¸¦ Token â†’ éªŒè¯ç­¾å â†’ æå–ç”¨æˆ·ä¿¡æ¯             â”‚
â”‚  3. TenantContext â†’ è·å–å½“å‰ç§Ÿæˆ· ID                      â”‚
â”‚  4. RBAC æ£€æŸ¥ â†’ éªŒè¯æƒé™ â†’ å…è®¸/æ‹’ç»                     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æƒé™å±‚çº§:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å…¨å±€æƒé™      â”‚  â†’ ç³»ç»Ÿç®¡ç†å‘˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç§Ÿæˆ·æƒé™      â”‚  â†’ ä¸šåŠ¡çº¿ç®¡ç†å‘˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   åŠŸèƒ½æƒé™      â”‚  â†’ æ™®é€šç”¨æˆ·
â”‚   â€¢ èœå•æƒé™    â”‚
â”‚   â€¢ æŒ‰é’®æƒé™    â”‚
â”‚   â€¢ API æƒé™    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

```java
// å®ä½“ç±»è§„èŒƒ (Panache Next)
@Entity
@Table(name = "alarms")
public class Alarm extends BaseEntity {
    
    @Column(name = "title")
    public String title;
    
    @JdbcTypeCode(SqlTypes.JSON)
    @Column(name = "metadata")
    public Map<String, Object> metadata;
    
    public interface Repo extends PanacheRepository<Alarm> {
        @Find
        Stream<Alarm> findBySourceId(String sourceId);
    }
}
```

```typescript
// å‰ç«¯ç»„ä»¶è§„èŒƒ
import { useQuery } from '@tanstack/react-query'
import { graphqlClient } from '@/lib/graphqlClient'

export function useUsers(page: number, size: number) {
  return useQuery({
    queryKey: ['users', page, size],
    queryFn: () => graphqlClient.request(USERS_QUERY, { page, size }),
  })
}
```

### æäº¤è§„èŒƒ

```
feat: æ·»åŠ å‘Šè­¦æ‰¹é‡å¤„ç†åŠŸèƒ½
fix: ä¿®å¤è§’è‰²åˆ é™¤æ—¶çš„ N+1 æŸ¥è¯¢é—®é¢˜
docs: æ›´æ–° GraphQL API æ–‡æ¡£
chore: å‡çº§ Quarkus åˆ° 3.31.2
refactor: é‡æ„æƒé™è¿‡æ»¤é€»è¾‘
test: æ·»åŠ è§’è‰²ç®¡ç† E2E æµ‹è¯•
```

### è´¨é‡æ£€æŸ¥

```bash
# SpotBugs é™æ€åˆ†æ
./gradlew spotbugsMain

# ä»£ç æ ¼å¼åŒ–
./gradlew spotlessApply

# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
./gradlew check

# æµ‹è¯•è¦†ç›–ç‡
./gradlew jacocoTestReport
```

---

## éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
./gradlew quarkusBuild -Dquarkus.container-image.build=true

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 8080:8080 \
  -e QUARKUS_DATASOURCE_JDBC_URL=jdbc:postgresql://db:5432/ams \
  -e QUARKUS_DATASOURCE_USERNAME=ams \
  -e QUARKUS_DATASOURCE_PASSWORD=secret \
  ams-ai:latest
```

### åŸç”Ÿé•œåƒ

```bash
# æ„å»ºåŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶
./gradlew build -Dquarkus.native.enabled=true

# è¿è¡ŒåŸç”Ÿé•œåƒ
./target/ams-ai-1.0.0-runner
```

### é…ç½®æ–‡ä»¶

```yaml
# application.yml
quarkus:
  datasource:
    jdbc:
      url: jdbc:postgresql://localhost:5432/ams
    username: ams
    password: secret
  
  hibernate-orm:
    database:
      generation: none
  
  hazelcast-client:
    agents: localhost:5701
  
  smallrye-graphql:
    ui:
      enable: true  # å¼€å‘ç¯å¢ƒå¯ç”¨ GraphQL UI
```

---

## è·¯çº¿å›¾

### v1.0.0 (MVP)
- [x] åŸºç¡€ç”¨æˆ·/è§’è‰²/æƒé™ç®¡ç†
- [x] GraphQL API æŸ¥è¯¢å±‚
- [x] å‰ç«¯ç®¡ç†ç•Œé¢
- [ ] å‘Šè­¦æ¥å…¥å’Œå¤„ç†
- [ ] åŸºç¡€é€šçŸ¥æ¸ é“

### v1.1.0
- [ ] é›†ç¾¤éƒ¨ç½²æ”¯æŒ
- [ ] AI åˆ†æèƒ½åŠ›
- [ ] æ›´å¤šé€šçŸ¥æ¸ é“
- [ ] å‰ç«¯æ€§èƒ½ä¼˜åŒ–

### v1.2.0
- [ ] é«˜çº§ç­–ç•¥å¼•æ“
- [ ] å¯è§‚æµ‹æ€§å¢å¼º
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–
- [ ] ç¬¬ä¸‰æ–¹é›†æˆ

### v2.0.0
- [ ] å¤šç§Ÿæˆ·å®Œå–„
- [ ] é«˜çº§è‡ªåŠ¨åŒ–
- [ ] ä¼ä¸šçº§å®‰å…¨
- [ ] äº‘åŸç”Ÿéƒ¨ç½²

---

## è®¸å¯è¯

Private - All Rights Reserved

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æäº¤ Issueã€‚
